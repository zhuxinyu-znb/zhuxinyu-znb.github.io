<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>框架面试题 | zxy的前端日志</title>
    <meta name="description" content="大前端之路开启">
    <link rel="icon" href="/tom.jpg">
    
    <link rel="preload" href="/assets/css/0.styles.0cbbf90a.css" as="style"><link rel="preload" href="/assets/js/app.4d237ac1.js" as="script"><link rel="preload" href="/assets/js/2.a060ff2c.js" as="script"><link rel="preload" href="/assets/js/150.4eb384a9.js" as="script"><link rel="prefetch" href="/assets/js/10.9b1783bd.js"><link rel="prefetch" href="/assets/js/100.f2ba88c1.js"><link rel="prefetch" href="/assets/js/101.5e4ff941.js"><link rel="prefetch" href="/assets/js/102.3b9faf71.js"><link rel="prefetch" href="/assets/js/103.ef114a14.js"><link rel="prefetch" href="/assets/js/104.038f45d3.js"><link rel="prefetch" href="/assets/js/105.5b457551.js"><link rel="prefetch" href="/assets/js/106.c1138d30.js"><link rel="prefetch" href="/assets/js/107.52f38a92.js"><link rel="prefetch" href="/assets/js/108.a794593b.js"><link rel="prefetch" href="/assets/js/109.18b69319.js"><link rel="prefetch" href="/assets/js/11.9c1e82ab.js"><link rel="prefetch" href="/assets/js/110.2261fb1b.js"><link rel="prefetch" href="/assets/js/111.00ccfb14.js"><link rel="prefetch" href="/assets/js/112.a9104a88.js"><link rel="prefetch" href="/assets/js/113.9f3a8f8a.js"><link rel="prefetch" href="/assets/js/114.206ecfeb.js"><link rel="prefetch" href="/assets/js/115.5745e2df.js"><link rel="prefetch" href="/assets/js/116.c1f7447b.js"><link rel="prefetch" href="/assets/js/117.9e065728.js"><link rel="prefetch" href="/assets/js/118.0f2d3691.js"><link rel="prefetch" href="/assets/js/119.6bea2203.js"><link rel="prefetch" href="/assets/js/12.67149a6a.js"><link rel="prefetch" href="/assets/js/120.32450f30.js"><link rel="prefetch" href="/assets/js/121.fee9f710.js"><link rel="prefetch" href="/assets/js/122.def18904.js"><link rel="prefetch" href="/assets/js/123.25039dca.js"><link rel="prefetch" href="/assets/js/124.c4050122.js"><link rel="prefetch" href="/assets/js/125.46b40dfe.js"><link rel="prefetch" href="/assets/js/126.51a1a5d8.js"><link rel="prefetch" href="/assets/js/127.7867f500.js"><link rel="prefetch" href="/assets/js/128.49de406e.js"><link rel="prefetch" href="/assets/js/129.cdf49571.js"><link rel="prefetch" href="/assets/js/13.fb79cecf.js"><link rel="prefetch" href="/assets/js/130.8b3710bf.js"><link rel="prefetch" href="/assets/js/131.36dfdd90.js"><link rel="prefetch" href="/assets/js/132.e44f7288.js"><link rel="prefetch" href="/assets/js/133.ec885b28.js"><link rel="prefetch" href="/assets/js/134.f1316579.js"><link rel="prefetch" href="/assets/js/135.ecf5779f.js"><link rel="prefetch" href="/assets/js/136.996ceb08.js"><link rel="prefetch" href="/assets/js/137.0b240ef8.js"><link rel="prefetch" href="/assets/js/138.de8c92b0.js"><link rel="prefetch" href="/assets/js/139.aa2176ad.js"><link rel="prefetch" href="/assets/js/14.7f7c1b73.js"><link rel="prefetch" href="/assets/js/140.5e8ac77c.js"><link rel="prefetch" href="/assets/js/141.abbc86d6.js"><link rel="prefetch" href="/assets/js/142.9174e4b3.js"><link rel="prefetch" href="/assets/js/143.22fd8bba.js"><link rel="prefetch" href="/assets/js/144.aed38b7d.js"><link rel="prefetch" href="/assets/js/145.a6813681.js"><link rel="prefetch" href="/assets/js/146.41a80028.js"><link rel="prefetch" href="/assets/js/147.ba1a7770.js"><link rel="prefetch" href="/assets/js/148.877bea00.js"><link rel="prefetch" href="/assets/js/149.27096d07.js"><link rel="prefetch" href="/assets/js/15.fbb3ce6c.js"><link rel="prefetch" href="/assets/js/151.528f4deb.js"><link rel="prefetch" href="/assets/js/152.192e9a1f.js"><link rel="prefetch" href="/assets/js/153.a3b71eb6.js"><link rel="prefetch" href="/assets/js/154.df79b8cb.js"><link rel="prefetch" href="/assets/js/155.aec97f81.js"><link rel="prefetch" href="/assets/js/16.03657715.js"><link rel="prefetch" href="/assets/js/17.20cbf2da.js"><link rel="prefetch" href="/assets/js/18.12a5dc5c.js"><link rel="prefetch" href="/assets/js/19.726a67f7.js"><link rel="prefetch" href="/assets/js/20.836a5d40.js"><link rel="prefetch" href="/assets/js/21.c951da6e.js"><link rel="prefetch" href="/assets/js/22.87c90120.js"><link rel="prefetch" href="/assets/js/23.99c7dbfb.js"><link rel="prefetch" href="/assets/js/24.d8c6d636.js"><link rel="prefetch" href="/assets/js/25.bb1086c1.js"><link rel="prefetch" href="/assets/js/26.31634d99.js"><link rel="prefetch" href="/assets/js/27.2fb85e0f.js"><link rel="prefetch" href="/assets/js/28.696d685c.js"><link rel="prefetch" href="/assets/js/29.488210dd.js"><link rel="prefetch" href="/assets/js/3.78e42548.js"><link rel="prefetch" href="/assets/js/30.2ba4ba04.js"><link rel="prefetch" href="/assets/js/31.d141acc1.js"><link rel="prefetch" href="/assets/js/32.086dce6f.js"><link rel="prefetch" href="/assets/js/33.ed1968ff.js"><link rel="prefetch" href="/assets/js/34.77827aa7.js"><link rel="prefetch" href="/assets/js/35.d5b914d6.js"><link rel="prefetch" href="/assets/js/36.f9397b07.js"><link rel="prefetch" href="/assets/js/37.64beee5f.js"><link rel="prefetch" href="/assets/js/38.67130674.js"><link rel="prefetch" href="/assets/js/39.de9f3702.js"><link rel="prefetch" href="/assets/js/4.5197eef5.js"><link rel="prefetch" href="/assets/js/40.f23dcf4c.js"><link rel="prefetch" href="/assets/js/41.b6418c92.js"><link rel="prefetch" href="/assets/js/42.75dabff5.js"><link rel="prefetch" href="/assets/js/43.7e1d7e20.js"><link rel="prefetch" href="/assets/js/44.53712706.js"><link rel="prefetch" href="/assets/js/45.dafdeeff.js"><link rel="prefetch" href="/assets/js/46.66f32e9c.js"><link rel="prefetch" href="/assets/js/47.23958449.js"><link rel="prefetch" href="/assets/js/48.f4ec7b60.js"><link rel="prefetch" href="/assets/js/49.518f1bec.js"><link rel="prefetch" href="/assets/js/5.b26139fb.js"><link rel="prefetch" href="/assets/js/50.c8e8fb43.js"><link rel="prefetch" href="/assets/js/51.5f15d9c7.js"><link rel="prefetch" href="/assets/js/52.4db4cdfb.js"><link rel="prefetch" href="/assets/js/53.6af7b618.js"><link rel="prefetch" href="/assets/js/54.fec88fbe.js"><link rel="prefetch" href="/assets/js/55.a7e02100.js"><link rel="prefetch" href="/assets/js/56.67d70446.js"><link rel="prefetch" href="/assets/js/57.4866ef69.js"><link rel="prefetch" href="/assets/js/58.e6488e01.js"><link rel="prefetch" href="/assets/js/59.2467dc1e.js"><link rel="prefetch" href="/assets/js/6.b88b0bec.js"><link rel="prefetch" href="/assets/js/60.a4188798.js"><link rel="prefetch" href="/assets/js/61.b275a457.js"><link rel="prefetch" href="/assets/js/62.d6b63240.js"><link rel="prefetch" href="/assets/js/63.681f3d8b.js"><link rel="prefetch" href="/assets/js/64.9eeded5a.js"><link rel="prefetch" href="/assets/js/65.19721dd4.js"><link rel="prefetch" href="/assets/js/66.038614c3.js"><link rel="prefetch" href="/assets/js/67.d802f033.js"><link rel="prefetch" href="/assets/js/68.ce021a23.js"><link rel="prefetch" href="/assets/js/69.7ceca11e.js"><link rel="prefetch" href="/assets/js/7.0d983d99.js"><link rel="prefetch" href="/assets/js/70.f997d037.js"><link rel="prefetch" href="/assets/js/71.c1557031.js"><link rel="prefetch" href="/assets/js/72.2d9f5c4e.js"><link rel="prefetch" href="/assets/js/73.11ad7e38.js"><link rel="prefetch" href="/assets/js/74.eab8f5c6.js"><link rel="prefetch" href="/assets/js/75.e9fb6786.js"><link rel="prefetch" href="/assets/js/76.abdc4f64.js"><link rel="prefetch" href="/assets/js/77.dc44de72.js"><link rel="prefetch" href="/assets/js/78.ebf803d8.js"><link rel="prefetch" href="/assets/js/79.3228bce2.js"><link rel="prefetch" href="/assets/js/8.8a23a928.js"><link rel="prefetch" href="/assets/js/80.8c3fdc1e.js"><link rel="prefetch" href="/assets/js/81.f1472a60.js"><link rel="prefetch" href="/assets/js/82.95875586.js"><link rel="prefetch" href="/assets/js/83.6bfbbc19.js"><link rel="prefetch" href="/assets/js/84.91ade6f8.js"><link rel="prefetch" href="/assets/js/85.b5fdbf72.js"><link rel="prefetch" href="/assets/js/86.9d1404c5.js"><link rel="prefetch" href="/assets/js/87.0567def1.js"><link rel="prefetch" href="/assets/js/88.0763a6b6.js"><link rel="prefetch" href="/assets/js/89.b76800ed.js"><link rel="prefetch" href="/assets/js/9.11df2484.js"><link rel="prefetch" href="/assets/js/90.e9371a29.js"><link rel="prefetch" href="/assets/js/91.3abf758b.js"><link rel="prefetch" href="/assets/js/92.49121cc0.js"><link rel="prefetch" href="/assets/js/93.e7b2f6cc.js"><link rel="prefetch" href="/assets/js/94.c3307a0b.js"><link rel="prefetch" href="/assets/js/95.90dfe36e.js"><link rel="prefetch" href="/assets/js/96.4df4988a.js"><link rel="prefetch" href="/assets/js/97.60b1c42f.js"><link rel="prefetch" href="/assets/js/98.6394b8d8.js"><link rel="prefetch" href="/assets/js/99.98be11a9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0cbbf90a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">zxy的前端日志</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">博客</a></div><div class="nav-item"><a href="/interview/" class="nav-link router-link-active">面试题</a></div><div class="nav-item"><a href="/book/" class="nav-link">阅读</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">博客</a></div><div class="nav-item"><a href="/interview/" class="nav-link router-link-active">面试题</a></div><div class="nav-item"><a href="/book/" class="nav-link">阅读</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>前端</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/interview/js.html" class="sidebar-link">JS 面试题</a></li><li><a href="/interview/css.html" class="sidebar-link">CSS 面试题</a></li><li><a href="/interview/html.html" class="sidebar-link">HTML 面试题</a></li><li><a href="/interview/framework.html" class="active sidebar-link">框架面试题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview/framework.html#_1、react-vue-使用感受" class="sidebar-link">1、React Vue 使用感受</a></li><li class="sidebar-sub-header"><a href="/interview/framework.html#_2、单向数据流和双向数据流有什么区别" class="sidebar-link">2、单向数据流和双向数据流有什么区别</a></li><li class="sidebar-sub-header"><a href="/interview/framework.html#_3、react-优点" class="sidebar-link">3、React 优点</a></li><li class="sidebar-sub-header"><a href="/interview/framework.html#_4、vue-优点" class="sidebar-link">4、Vue 优点</a></li><li class="sidebar-sub-header"><a href="/interview/framework.html#_5、webpack-插件怎么编写" class="sidebar-link">5、webpack 插件怎么编写</a></li><li class="sidebar-sub-header"><a href="/interview/framework.html#_6、webpack-loader-编写" class="sidebar-link">6、webpack loader 编写</a></li><li class="sidebar-sub-header"><a href="/interview/framework.html#_7、webpack-插件之间怎么互相通信" class="sidebar-link">7、webpack 插件之间怎么互相通信</a></li><li class="sidebar-sub-header"><a href="/interview/framework.html#_8、react-中是否必须将所有状态都放入-redux" class="sidebar-link">8、React 中是否必须将所有状态都放入 Redux</a></li><li class="sidebar-sub-header"><a href="/interview/framework.html#_9-请描述一下-vuex-中的几大模块之间的作用" class="sidebar-link">9. 请描述一下 Vuex 中的几大模块之间的作用</a></li><li class="sidebar-sub-header"><a href="/interview/framework.html#_10、说说你理解的-flutter" class="sidebar-link">10、说说你理解的 Flutter</a></li><li class="sidebar-sub-header"><a href="/interview/framework.html#_11、在-react-中，为什么最好在-componentdidmount-中发起请求" class="sidebar-link">11、在 React 中，为什么最好在 ComponentDidMount 中发起请求</a></li><li class="sidebar-sub-header"><a href="/interview/framework.html#_12、简述一下-react-中的事件机制" class="sidebar-link">12、简述一下 React 中的事件机制</a></li><li class="sidebar-sub-header"><a href="/interview/framework.html#_13、什么是可控组件和不可控组件" class="sidebar-link">13、什么是可控组件和不可控组件</a></li><li class="sidebar-sub-header"><a href="/interview/framework.html#_14、react-异步渲染原理" class="sidebar-link">14、React 异步渲染原理</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>笔试题</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/interview/2019-07-16-100questions.html" class="sidebar-link">前端面试题及答案汇总(一) 1-10</a></li><li><a href="/interview/2020-01-22-100questions.html" class="sidebar-link">前端面试题及答案汇总(二) 11-20</a></li><li><a href="/interview/2020-01-24-100questions.html" class="sidebar-link">前端面试题及答案汇总(三) 21-30</a></li><li><a href="/interview/2020-01-30-100questions.html" class="sidebar-link">前端面试题及答案汇总(四) 41-50</a></li><li><a href="/interview/2020-02-01-100questions.html" class="sidebar-link">前端面试题及答案汇总(五) 51-60</a></li><li><a href="/interview/2020-02-02-100questions.html" class="sidebar-link">前端面试题及答案汇总(六) 61-70</a></li><li><a href="/interview/2020-02-03-100questions.html" class="sidebar-link">前端面试题及答案汇总(七) 71-80</a></li><li><a href="/interview/2020-02-04-100questions.html" class="sidebar-link">前端面试题及答案汇总(八) 81-90</a></li><li><a href="/interview/2020-02-06-100questions.html" class="sidebar-link">前端面试题及答案汇总(九) 91-100</a></li><li><a href="/interview/2019-07-21-yidengquestions.html" class="sidebar-link">javascript基础测试题(一)</a></li><li><a href="/interview/2019-07-21-yidengquestions2.html" class="sidebar-link">javascript 基础测试题(二)</a></li><li><a href="/interview/2019-07-21-yidengquestions3.html" class="sidebar-link">javascript基础测试题(三)</a></li><li><a href="/interview/2019-08-06-yidengquestion.html" class="sidebar-link">javascript基础测试题(四)</a></li><li><a href="/interview/2019-12-21-question.html" class="sidebar-link">手写代码无敌秘籍（一）</a></li><li><a href="/interview/2021-04-06-手写.html" class="sidebar-link">手写代码无敌秘籍（二）</a></li><li><a href="/interview/2020-02-15-面试总结.html" class="sidebar-link">大佬的面经</a></li><li><a href="/interview/2020-04-01-面试总结.html" class="sidebar-link">面试总结</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>算法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/interview/leetcode.html" class="sidebar-link">leetcode 各种题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>编程基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/interview/base.html" class="sidebar-link">基础面试题</a></li><li><a href="/interview/suanfa.html" class="sidebar-link">算法面试题</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="框架面试题"><a href="#框架面试题" class="header-anchor">#</a> 框架面试题</h1> <h2 id="_1、react-vue-使用感受"><a href="#_1、react-vue-使用感受" class="header-anchor">#</a> 1、React Vue 使用感受</h2> <p>遇到这个开放式的问题，我也是楞了一下，要是之前能稍微总结一下就能回答得更好。</p> <p>相同点：</p> <ol><li>虚拟 DOM</li> <li>组件化</li> <li>保持对视图的关注</li> <li>数据驱动视图</li> <li>都有支持 native 的方案</li></ol> <p>不同点：</p> <ol><li>state 状态管理 vs 对象属性 get，set。</li> <li>vue 实现了数据的双向绑定 v-model，而组件之间的 props 传递是单向的，react 数据流动是单向的。</li></ol> <h3 id="运行时优化"><a href="#运行时优化" class="header-anchor">#</a> 运行时优化</h3> <p>在 React 应用中，当某个组件的状态发生变化时，它会以该组件为根，重新渲染整个组件子树，开发者不得不手动使用 shouldComponentUpdate 去优化性能。</p> <p>在 Vue 组件的依赖是在渲染过程中自动追踪的，开发者不再需要考虑此类优化。另外 Vue 还做了很多其他方面的优化，例如：标记静态节点，优化静态循环等。</p> <blockquote><p>总结：Vue 在运行时帮我们做了很多优化了处理，开发者可以直接上手，React 则是由开发者自己去处理优化，让程序有更多的定制化。</p></blockquote> <h3 id="jsx-vs-templates"><a href="#jsx-vs-templates" class="header-anchor">#</a> JSX vs Templates</h3> <p>JSX 中你可以使用完整的编程语言 JavaScript 功能来构建你的视图页面。比如你可以使用临时变量、JS 自带的流程控制、以及直接引用当前 JS 作用域中的值等等。</p> <p>Templates 对于很多习惯了 HTML 的开发者来说，模板比起 JSX 读写起来更自然。基于 HTML 的模板使得将已有的应用逐步迁移到 Vue 更为容易。你甚至可以使用其他模板预处理器，比如 Pug 来书写 Vue 的模板。</p> <blockquote><p>总结：Vue 在模板上实现定制化，可以使用类 HTML 模板，以及可以使用 JSX，React 则是推荐 JSX。</p></blockquote> <h3 id="生态圈"><a href="#生态圈" class="header-anchor">#</a> 生态圈</h3> <p>Vue 的路由库和状态管理库都是由<strong>官方维护</strong>支持且与核心库同步更新的。</p> <p>React 的路由库和状态管理库是由社区维护，因此创建了一个更分散的生态系统。React 的生态系统相比 Vue 更加繁荣。</p> <h2 id="_2、单向数据流和双向数据流有什么区别"><a href="#_2、单向数据流和双向数据流有什么区别" class="header-anchor">#</a> 2、单向数据流和双向数据流有什么区别</h2> <h3 id="单向数据流"><a href="#单向数据流" class="header-anchor">#</a> 单向数据流</h3> <p>优点：</p> <ol><li>所有状态的改变可记录、可跟踪，源头易追溯。</li> <li>所有数据只有一份，组件数据只有唯一的入口和出口，使得程序更直观更容易理解，有利于应用的可维护性。</li> <li>一旦数据变化，就去更新页面(data -&gt; 页面)，没有(页面 -&gt; data)。</li> <li>如果用户在页面上做了变动，需要手动更新数据。</li></ol> <p>缺点：</p> <ol><li>HTML 代码渲染完成，无法改变，新数据到来时，就会整合新数据和模板重新渲染。</li> <li>代码量上升，数据流转换过程变长，需要进行统一的数据流管理，例如：redux。</li></ol> <h3 id="双向数据流"><a href="#双向数据流" class="header-anchor">#</a> 双向数据流</h3> <p>双向绑定 = 单向绑定 + UI 事件监听。</p> <p>优点：</p> <ol><li>用户在视图上的修改会自动同步到数据模型中去，数据模型中值的变化也会立刻同步到视图中去。</li> <li>在表单交互较多的场景下，会简化大量业务无关的代码。</li></ol> <p>缺点：</p> <ol><li>无法追踪局部状态的变化。</li> <li>可能存在暗箱操作，增加了出错时 debug 的难度。</li> <li>由于组件数据变化来源入口不止一个，数据流转方向易混乱，如果不加以控制，容易出错。</li></ol> <h2 id="_3、react-优点"><a href="#_3、react-优点" class="header-anchor">#</a> 3、React 优点</h2> <ol><li>函数式编程思想，无状态组件，同样的 prop 对应同样的输出。</li> <li>虚拟 dom，firber，底层优化，提高渲染效率。</li> <li>模块化思想，复用性更强。</li> <li>单向数据流，让事情一目了然。</li> <li>以 js 为中心，使用 jsx 开发页面，css in js 书写样式。</li> <li>支持服务器端渲染。</li> <li>一套代码多端运行。</li></ol> <p>缺点：</p> <ol><li>只是视图层，构建大型项目的话，需要引入 redux 和 react-router 等相关的东西。</li></ol> <h2 id="_4、vue-优点"><a href="#_4、vue-优点" class="header-anchor">#</a> 4、Vue 优点</h2> <ol><li>类 HTML 模板语法，更容易上手。</li> <li>模块化思想，复用性强。</li> <li>虚拟 dom，运行时优化，提高渲染效率。</li> <li>支持双向数据绑定，易用性强。</li> <li>支持服务器端渲染。</li></ol> <p>缺点：</p> <ol><li>社区不如 react，大多是中国开发者。</li> <li>生态圈不够，vue 全家桶都是 vue 官方自己出的东西。</li></ol> <h2 id="_5、webpack-插件怎么编写"><a href="#_5、webpack-插件怎么编写" class="header-anchor">#</a> 5、webpack 插件怎么编写</h2> <p>webpack 就像是一条生产线，要经过一系列流程处理之后才能将源文件转换成输出结果。</p> <p>webpack plugin 实质就是一个类，在被创建的时候，会监听 webpack 生产线上的事件，然后加入生产线中，改变生产线输出。</p> <p>webpack 启动后，会读取配置中的 plugins，并创建对应实例，在 webpack 初始化 compiler 对象之后，再调用 plugin 中的 apply 方法，把 compiler 注入到插件中。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">HelloAsyncPlugin</span> <span class="token punctuation">{</span>
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// tapAsync() 基于回调(callback-based)</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'HelloAsyncPlugin'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>
      <span class="token parameter">compilation<span class="token punctuation">,</span>
      callback</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Done with async work...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// tapPromise() 基于 promise(promise-based)</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tapPromise</span><span class="token punctuation">(</span><span class="token string">'HelloAsyncPlugin'</span><span class="token punctuation">,</span> <span class="token parameter">compilation</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">doSomethingAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Done with async work...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 原先基本的 tap() 也在这里列出：</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'HelloAsyncPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 这里没有异步任务</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Done with sync work...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> HelloAsyncPlugin<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="_6、webpack-loader-编写"><a href="#_6、webpack-loader-编写" class="header-anchor">#</a> 6、webpack loader 编写</h2> <p>webpack loader 实质就是一个<code>function</code>，function 中会被注入需要被处理的资源，然后加以处理。</p> <p>loader 的执行时会先执行最后的 loader，然后再执行前一个 loader，如果想按顺序执行，可以定义 pitch 方法。</p> <p>loader 一般会使用 acorn 将代码转换过成 ast 语法树，然后再进行对应的操作，最后再转换会字符串。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'loader-utils'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> validateOptions <span class="token keyword">from</span> <span class="token string">'schema-utils'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> schema <span class="token operator">=</span> <span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> <span class="token string">'object'</span><span class="token punctuation">,</span>
  properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    test<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'string'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">validateOptions</span><span class="token punctuation">(</span>schema<span class="token punctuation">,</span> options<span class="token punctuation">,</span> <span class="token string">'Example Loader'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 对资源应用一些转换……</span>

  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">export default </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// pitch方法，在捕获阶段执行的函数</span>
module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span><span class="token function-variable function">pitch</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">remainingRequest<span class="token punctuation">,</span> precedingRequest<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  data<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="_7、webpack-插件之间怎么互相通信"><a href="#_7、webpack-插件之间怎么互相通信" class="header-anchor">#</a> 7、webpack 插件之间怎么互相通信</h2> <p>在 webpack 中，通过 tapable 管理运行时的各种事件流，不同的 webpack plugins 可以通过自定义事件相互通信。</p> <p>例如：在 <code>Bplugin</code> 中监听 <code>Aplugin</code> 中的事件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// A 插件</span>
<span class="token keyword">const</span> SyncHook <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'tapable'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>SyncHook<span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">APlugin</span> <span class="token punctuation">{</span>
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>myCustomHook<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Already in use'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 声明一个自定义事件，并初始化需要传递的参数。</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>myCustomHook <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SyncHook</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'参数1'</span><span class="token punctuation">,</span> <span class="token string">'参数2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 在当前插件中监听自定义事件</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>myCustomHook<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'APlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'获取到参数：'</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 可以在任意的钩子函数中去触发自定义事件</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>compilation<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'APlugin'</span><span class="token punctuation">,</span> <span class="token parameter">compilation</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      compilation<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>afterOptimizeChunkAssets<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'APlugin'</span><span class="token punctuation">,</span> <span class="token parameter">chunks</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">myCustomHook</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// B 插件</span>
<span class="token keyword">class</span> <span class="token class-name">BPlugin</span> <span class="token punctuation">{</span>
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 监听A组件定义的事件</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>myCustomHook<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'BPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'获取到参数：'</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="_8、react-中是否必须将所有状态都放入-redux"><a href="#_8、react-中是否必须将所有状态都放入-redux" class="header-anchor">#</a> 8、React 中是否必须将所有状态都放入 Redux</h2> <p>我们都知道，如果把状态都存在 redux 中，就可以编写出更多无状态的组件。</p> <p>无状态组件优点：</p> <ul><li>代码整洁、可读性高</li> <li>无状态组件的性能好</li></ul> <p>个人理解，并不是所有的 state 都存放在 redux 里比较好，应该考虑一下几点：</p> <ul><li>该应用程序的其他部分是否关心此数据？</li> <li>您是否需要能够根据此原始数据创建更多派生数据？</li> <li>是否使用相同的数据来驱动多个组件？</li> <li>能够将此状态恢复到给定时间点？</li> <li>你想缓存数据？</li></ul> <p>如果你没有以上的需要，就不要把 state 放入 redux 中。</p> <h2 id="_9-请描述一下-vuex-中的几大模块之间的作用"><a href="#_9-请描述一下-vuex-中的几大模块之间的作用" class="header-anchor">#</a> 9. 请描述一下 Vuex 中的几大模块之间的作用</h2> <p>vuex 的原理很简单，简单来说：</p> <ul><li>view dispatch 一个 action。</li> <li>action commit 一个 mutation。</li> <li>mutation 修改 store 后，重新更新视图。</li></ul> <p><img src="https://vuex.vuejs.org/vuex.png" alt="vuex 流程图"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 创建一个store，如果需要拆分，可以将不同的模块挂载到 modules 上。</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// store 中的对象</span>
  state<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 唯一改变 store 的方法，只能是同步更新</span>
  mutations<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// action 派发一个 mutation，可以使用异步方法</span>
  actions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'increment'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 派生 store 中的状态</span>
  getters<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">showCount</span><span class="token punctuation">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">'当前的count是：'</span> <span class="token operator">+</span> state<span class="token punctuation">.</span>count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>获取声明的 store，为了方便调用 store 上的 state，getter，action，vuex 提供了 mapState，mapGetters，mapActions 方法。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mapState<span class="token punctuation">,</span> mapGetters<span class="token punctuation">,</span> mapActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>；

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  computed<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">otherCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token function-variable function">count</span><span class="token punctuation">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>count<span class="token comment">// 把 `this.count` 映射为 `this.$store.state.count`</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token string">'showCount'</span><span class="token comment">// 把 `this.showCount` 映射为 `this.$store.getters.showCount`</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span><span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token string">'increment'</span><span class="token comment">// 将 `this.increment()` 映射为 `this.$store.dispatch('increment')`</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="_10、说说你理解的-flutter"><a href="#_10、说说你理解的-flutter" class="header-anchor">#</a> 10、说说你理解的 Flutter</h2> <p>在 Flutter 诞生之前，已经有许多跨平台 UI 框架的方案，比如基于 WebView 的 Cordova、AppCan 等，还有使用 HTML + JS 渲染成原生控件的 React Native、Weex 等。</p> <p>基于 WebView 的框架优点很明显，它们几乎可以完全继承现代 Web 开发的所有成果（丰富的控件库、满足各种需求的页面框架、完全的动态化、自动化测试工具等），当然也包括 Web 开发人员，不需要太多的学习和迁移成本就可以开发一个 App。同时 WebView 框架也有一个致命的缺点，那就是 <strong>WebView 的渲染效率和 JS 执行性能太差。再加上 Android 各个系统版本和设备厂商的定制，很难保证所在所有设备上都能提供一致的体验</strong>。</p> <p>为了解决 WebView 性能差的问题，以 React Native 为代表的一类框架将最终渲染工作交还给了系统，虽然同样使用类 HTML + JS 的 UI 构建逻辑，但是<strong>最终会生成对应的自定义原生控件</strong>，以充分利用原生控件相对于 WebView 的较高的绘制效率。与此同时这种策略也将框架本身和 App 开发者绑在了系统的控件系统上，不仅<strong>框架本身需要处理大量平台相关的逻辑</strong>，随着系统版本变化和 API 的变化，开发者可能也需要处理不同平台的差异，甚至有些特性只能在部分平台上实现，这样框架的跨平台特性就会大打折扣。</p> <p>Flutter 则开辟了一种全新的思路，从头到尾重写一套跨平台的 UI 框架，包括 UI 控件、渲染逻辑甚至开发语言。渲染引擎依靠跨平台的 Skia 图形库来实现，依赖系统的只有图形绘制相关的接口，<strong>可以在最大程度上保证不同平台、不同设备的体验一致性</strong>，逻辑处理使用支持 AOT 的 Dart 语言，<strong>执行效率也比 JS 高得多</strong>。</p> <h2 id="_11、在-react-中，为什么最好在-componentdidmount-中发起请求"><a href="#_11、在-react-中，为什么最好在-componentdidmount-中发起请求" class="header-anchor">#</a> 11、在 React 中，为什么最好在 ComponentDidMount 中发起请求</h2> <p>1、react filber 中可能多次调用 render 之前的生命周期函数，可能会请求多次。</p> <p>2、componentWillMount 在服务器端渲染时，服务器端会执行一次，客户端也会执行一次。</p> <p>3、如果请求在 componentWillMount，react 并没有挂载到 dom 上，这时候 setState 可能会有问题。</p> <h2 id="_12、简述一下-react-中的事件机制"><a href="#_12、简述一下-react-中的事件机制" class="header-anchor">#</a> 12、简述一下 React 中的事件机制</h2> <p>React 其实自己实现了一套事件机制，首先我们考虑一下以下代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">Test</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> list<span class="token punctuation">,</span> handleClick <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>span onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span> key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>以上类似代码想必大家经常会写到，但是你是否考虑过点击事件是否绑定在了每一个标签上？实际上并不是，JSX 上写的事件并没有绑定在对应的真实 DOM 上，而是通过事件代理的方式，将所有的事件都统一绑定在了 document 上。这样的方式不仅减少了内存消耗，还能在组件挂载销毁时统一订阅和移除事件。</p> <p>另外冒泡到 document 上的事件也不是原生浏览器事件，而是 React 自己实现的合成事件。因此不能使用 event.stopPropagation 阻止事件冒泡，而应该使用 event.preventDefault。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>合成事件首先抹平了浏览器之间的兼容问题，另外这是一个跨浏览器原生事件包装器，赋予了跨浏览器开发的能力。</li> <li>合成事件在运行时，有一个事件池专门来管理它们的创建和销毁，当事件需要被使用时，就会从池子中复用对象，事件回调结束后，就会销毁事件对象上的属性，从而便于下次复用事件对象。</li></ul></div> <h2 id="_13、什么是可控组件和不可控组件"><a href="#_13、什么是可控组件和不可控组件" class="header-anchor">#</a> 13、什么是可控组件和不可控组件</h2> <p>在 html 中，像<code>&lt;input&gt;</code>,<code>&lt;textarea&gt;</code>, 和 <code>&lt;select&gt;</code>这类表单元素会维持自身的值 value，并根据用户输入进行更新。但在 react 中，可变的状态是保存在组件的 state 中的，并且只能用 setState 方法进行更新。</p> <p>我们可以编写双向绑定，统一管理状态：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">changeValue</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>
    value <span class="token punctuation">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input oninput<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>changeValue<span class="token punctuation">}</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>通过 react 统一管理状态后的组件，又叫做可控组件。</p> <h2 id="_14、react-异步渲染原理"><a href="#_14、react-异步渲染原理" class="header-anchor">#</a> 14、React 异步渲染原理</h2> <p>React 不会保证在 setState 之后，能够立刻拿到改变的结果。</p> <p>setState 渲染流程如下：</p> <ul><li>在 setState 中调用了 enqueueSetState 方法将传入的 state 放到一个队列中。</li> <li>enqueueSetState 中先是找到需渲染组件并将新的 state 并入该组件的需更新的 state 队列中，接下来调用了 enqueueUpdate 方法。</li> <li>isBatchingUpdates 表示是否在一个更新组件的事务流中。
<ul><li>已在事务流中，将需更新的组件放入 dirtyComponents 中，在下一次渲染时才会更新 state。</li> <li>未在事务流中，调用 batchedUpdates 方法进入更新流程，进入流程后，会将 isBatchingUpdates 设置为 true。</li></ul></li></ul> <p>这里衍生出了一个问题，什么时候会标识 isBatchingUpdates 为 true？</p> <ul><li>当处于生命周期 render 之后的生命周期中。</li> <li>合成事件中（jsx 中的事件都是合成事件）。</li></ul> <p>案例：在 setTimeout 中执行 setstate 时，没有在 react 事务流中，所以会直接进入更新路程，同步渲染。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">11/8/2019, 4:51:43 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/interview/html.html" class="prev">HTML 面试题</a></span> <span class="next"><a href="/interview/2019-07-16-100questions.html">前端面试题及答案汇总(一) 1-10</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.4d237ac1.js" defer></script><script src="/assets/js/2.a060ff2c.js" defer></script><script src="/assets/js/150.4eb384a9.js" defer></script>
  </body>
</html>
