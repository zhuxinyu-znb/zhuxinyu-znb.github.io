(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{249:function(t,s,a){"use strict";a.r(s);var n=a(0),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"前端架构与性能优化那些事儿"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端架构与性能优化那些事儿"}},[t._v("#")]),t._v(" 前端架构与性能优化那些事儿")]),t._v(" "),a("h2",{attrs:{id:"为什么要进行性能优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么要进行性能优化"}},[t._v("#")]),t._v(" 为什么要进行性能优化")]),t._v(" "),a("ul",[a("li",[t._v("57%的⽤用户更更在乎⽹网⻚页在3秒内是否完成加载。")]),t._v(" "),a("li",[t._v("52%的在线⽤用户认为⽹网⻚页打开速度影响到他们对⽹网站的忠实度。")]),t._v(" "),a("li",[t._v("每慢1秒造成⻚页⾯面 PV 降低11%，⽤用户满意度也随之降低降低16%。")]),t._v(" "),a("li",[t._v("近半数移动⽤用户因为在10秒内仍未打开⻚页⾯面从⽽而放弃。")])]),t._v(" "),a("h2",{attrs:{id:"性能优化学徒⼯工"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#性能优化学徒⼯工"}},[t._v("#")]),t._v(" 性能优化学徒⼯工")]),t._v(" "),a("ul",[a("li",[t._v("雅⻁虎军规")]),t._v(" "),a("li",[t._v("缓存策略")]),t._v(" "),a("li",[t._v("网站协议")]),t._v(" "),a("li",[t._v("小字为先")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/blog/20190916-xingneng1.png",alt:"图片"}})]),t._v(" "),a("p",[t._v("压缩合并的权衡，文件gzip后如果小于28.5kb算是比较合格的大小，请求个数5个左右。")]),t._v(" "),a("p",[t._v("善用离线缓存\nLocal Storage 5M\nLocal Storage里缓存js文件")]),t._v(" "),a("p",[t._v("script/a.js -> script/a.55ggll.js\nscript/a.55ggll.js -> js文件")]),t._v(" "),a("p",[t._v('1.{\nscript/a.js : "script/a.55ggll.js"\n}\n2.首页 no-cache, 不能被缓存\n3.激活的js文件\n缓存中去取 ->  script/a.js\nscript/a.js -> "script/a.55ggll.js"\n【过期的文件】\nscript/a.55ggll.js:.........\naddScrtipt add header '),a("script",{attrs:{id:"xxx"}}),t._v('\n【过期】\n缓存中没有\nscript/a.js 请求回来\nscript/a.js -》 text\nscript/a.js -> "script/a.55ggll.js"\nscript/a.55ggll.js:text\n业务代码')]),t._v(" "),a("h3",{attrs:{id:"缓存的优先级"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缓存的优先级"}},[t._v("#")]),t._v(" 缓存的优先级")]),t._v(" "),a("ul",[a("li",[t._v("cache-control")]),t._v(" "),a("li",[t._v("expires")]),t._v(" "),a("li",[t._v("etag")]),t._v(" "),a("li",[t._v("last-modified")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/blog/20190916-xingneng2.png",alt:"图片"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"/blog/20190916-xingneng3.png",alt:"图片"}})]),t._v(" "),a("h2",{attrs:{id:"渲染中性能优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#渲染中性能优化"}},[t._v("#")]),t._v(" 渲染中性能优化")]),t._v(" "),a("ol",[a("li",[t._v("网页渲染过程\n1-1 获取Dom元素并分割多个多层\n1-2 对每个图层节点进行样式的计算 Recalculate Style\n1-3 为每个节点生成图形和位置 Layout\n1-4 对每个节点进行绘制 填充到图层中去 Paint\n1-5 把图层作为纹理上传GPU Composite Layers")])]),t._v(" "),a("p",[t._v("重排一定是引起重绘 但是重绘不一定引起重排")]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("Layout 》 Paint 》  Composite Layers")]),t._v(" "),a("li",[t._v("网页要分层  根元素、position、transform、半透明、canvas、video、overflow")]),t._v(" "),a("li",[t._v("让GPU参与的分层 硬件加速 CSS3D、Video、webgl、滤镜")]),t._v(" "),a("li",[t._v("重排\n5-1 添加或者删除dom元素\n5-2 元素位置改变\n5-3 盒子模型变了\n5-4 页面初始化\n5-5 读到某个属性 offset scroll client width")]),t._v(" "),a("li",[t._v('读写分离\nconst h1 = document.get("xx").clientHeight;\nconst h2 = document.get("xx").offset;\nh1+h2\n读写分离\nrequestAnimationFrame -》 设置')]),t._v(" "),a("li",[t._v("cpu和gpu渲染的区别\n相同之处：两者都有总线的和外界联系 有自己的缓存体系 以及数字和逻辑的运算单元 为计算而生\n不同之处:CPU主要是负责操作系统相关的 GOU主要负责和显示相关 效率更高")])]),t._v(" "),a("h2",{attrs:{id:"页面加载性能优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#页面加载性能优化"}},[t._v("#")]),t._v(" 页面加载性能优化")]),t._v(" "),a("h2",{attrs:{id:"nodejs性能优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nodejs性能优化"}},[t._v("#")]),t._v(" NodeJS性能优化")])])}),[],!1,null,null,null);s.default=r.exports}}]);