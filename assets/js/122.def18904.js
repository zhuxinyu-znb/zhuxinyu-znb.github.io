(window.webpackJsonp=window.webpackJsonp||[]).push([[122],{324:function(s,t,a){"use strict";a.r(t);var n=a(0),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"《编写可维护的-javascript》"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#《编写可维护的-javascript》"}},[s._v("#")]),s._v(" 《编写可维护的 JavaScript》")]),s._v(" "),a("p",[s._v("最近阅读了《编写可维护的 JavaScript》，在这里记录一下读书笔记。书中主要基于三个方向来讲解怎么增加代码的可维护性："),a("strong",[s._v("编程风格")]),s._v("、"),a("strong",[s._v("编程实践")]),s._v("、"),a("strong",[s._v("自动化")]),s._v("。")]),s._v(" "),a("h2",{attrs:{id:"编程风格"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编程风格"}},[s._v("#")]),s._v(" 编程风格")]),s._v(" "),a("ul",[a("li",[s._v("缩进方式\n"),a("ul",[a("li",[s._v("使用空格（推荐）。")]),s._v(" "),a("li",[s._v("使用制表符（Tab 键）。\n"),a("ul",[a("li",[s._v("不同的操作系统对于制表符的解释不一致，导致看起来不一致。")])])])])]),s._v(" "),a("li",[s._v("命名方式\n"),a("ul",[a("li",[s._v("变量名用名词。\n"),a("ul",[a("li",[s._v("常量使用大写单词加下划线 MAX_NUM。")])])]),s._v(" "),a("li",[s._v("函数名用动词开头\n"),a("ul",[a("li",[s._v("构造函数用大驼峰写法。")])])])])]),s._v(" "),a("li",[s._v("null 对象的用法\n"),a("ul",[a("li",[s._v("初始化一个变量。")]),s._v(" "),a("li",[s._v("和一个已经初始化的变量做比较。")]),s._v(" "),a("li",[s._v("函数参数期望是对象时，用作参数传入。")]),s._v(" "),a("li",[s._v("函数返回值是对象时，可以当做返回值。")])])])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 好的写法")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" person "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getPerson")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("num")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("num "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Person")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Lily'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 好的写法")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" person "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Person")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 好的写法")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("person "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("ul",[a("li",[s._v("不要和非对象，或者未赋值变量做比较。")]),s._v(" "),a("li",[s._v("不要用来检测函数参数是否传入。")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" person"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 不好的写法")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("person "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("doSomeThing")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("arr1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" arr2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 不好的写法")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("arr1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'arr1 参数没有传递'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h3",{attrs:{id:"编写注释"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写注释"}},[s._v("#")]),s._v(" 编写注释")]),s._v(" "),a("p",[s._v("使用注释的一般原则是：让代码变得更清晰。我们一般通过这几点来注释代码：")]),s._v(" "),a("ul",[a("li",[s._v("难以理解的代码。")]),s._v(" "),a("li",[s._v("可能被误解的代码。")]),s._v(" "),a("li",[s._v("浏览器 hack。")])]),s._v(" "),a("p",[s._v("注释的书写规范：")]),s._v(" "),a("ul",[a("li",[s._v("注释的上方需要一个空行。")]),s._v(" "),a("li",[s._v("单行注释，如果在尾部注释，需要加一个空格。")]),s._v(" "),a("li",[s._v("多行注释中的每一行需对齐，最好也有一个星号。")]),s._v(" "),a("li",[s._v("可以加一些注释声明。\n"),a("ul",[a("li",[s._v("TODO 代码未完成。")]),s._v(" "),a("li",[s._v("HACK 代码走了一个捷径，应注明原因")]),s._v(" "),a("li",[s._v("FIXME 代码有问题，应尽快修复")]),s._v(" "),a("li",[s._v("REVIEW 代码的改动需要评审")])])])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" person "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("condition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 做一些事情")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("doSomeThing")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 做一些事情")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*\n * 这是创建一个对象\n * 第二行\n */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" p "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Person")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n@method merge\n@param {Object} 被合并的对象\n@return {Object} 一个新的对象\n**/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("doSomeThing")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("obj")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("assign")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" asd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// REVIEW: 有更好的写法吗？")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("all"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br")])]),a("h3",{attrs:{id:"语句和表达式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#语句和表达式"}},[s._v("#")]),s._v(" 语句和表达式")]),s._v(" "),a("p",[s._v("在语句和表达式一章，书中主要是写关于大括号对齐方式等，以下两点让我影响特别深刻：")]),s._v(" "),a("ul",[a("li",[s._v("循环中尽可能避免使用 continue，使用条件判断替代（可读性更好）。")]),s._v(" "),a("li",[a("strong",[s._v("for in 循环只是用来遍历对象的")]),s._v("，不要用来遍历数组。如果不需要遍历原型链上的对象，可以使用 "),a("code",[s._v("hasOwnProperty")]),s._v("。")])]),s._v(" "),a("h3",{attrs:{id:"变量、函数和运算符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变量、函数和运算符"}},[s._v("#")]),s._v(" 变量、函数和运算符")]),s._v(" "),a("ul",[a("li",[s._v("定义变量\n"),a("ul",[a("li",[s._v("合并 var 语句，让代码更短。")]),s._v(" "),a("li",[s._v("函数内部的变量定义应作为函数内的第一条语句。")]),s._v(" "),a("li",[s._v("for 语句初始化部分不应该有变量声明，应提前到外面。")])])]),s._v(" "),a("li",[s._v("立即执行的函数需要被一眼看出来，可以将函数用一堆圆括号包裹起来。")]),s._v(" "),a("li",[s._v("严格模式不要加在全局，只应加在需要用到的函数作用域内，避免影响其他库。")]),s._v(" "),a("li",[s._v("禁止使用 eval，new Function，setTimeOut，setInterval 的字符串形式。")]),s._v(" "),a("li",[s._v("三元运算符仅仅用在赋值语句上，不要成为 if else 的替代品。")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("String 类型可以调用 String 包装器的方法，是因为语句的背后，JS 引擎创建了 String 类型的新实例，紧跟着就销毁了，所以给 String 类型上添加属性和方法是没有用的。")])]),s._v(" "),a("h2",{attrs:{id:"编程实践"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编程实践"}},[s._v("#")]),s._v(" 编程实践")]),s._v(" "),a("p",[s._v("在 WEB 开发中，用户界面是由三个彼此隔离又相互作用的层定义的：HTML、CSS、JavaScript。由于这三个部分是相互作用的，应该尽量分开这几个模块，以增强代码的可维护性。")]),s._v(" "),a("ul",[a("li",[s._v("将 JS 从 CSS 中抽离出来。\n"),a("ul",[a("li",[s._v("避免使用 CSS 表达式。")])])]),s._v(" "),a("li",[s._v("将 CSS 从 JS 中抽离出来。\n"),a("ul",[a("li",[s._v("避免使用 JS 直接操作 dom.style 属性。")]),s._v(" "),a("li",[s._v("应该只需要操作 CSS 的 className 属性。")])])]),s._v(" "),a("li",[s._v("将 JS 从 HTML 中抽离出来。\n"),a("ul",[a("li",[s._v("避免使用 DOM0 级事件处理函数。 例如："),a("code",[s._v('<div onclick="xxx"></div>')])]),s._v(" "),a("li",[s._v("使用自定义事件处理函数。")])])]),s._v(" "),a("li",[s._v("将 HTML 从 JS 中抽离出来。\n"),a("ul",[a("li",[s._v("避免 JS 使用写死的 HTML 字符串，去 innerHTML 插入代码。")])])])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("div"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("innerHTML "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'<h1>你好</h1>'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("JS 可以使用一下几种方式来操作 HTML：")]),s._v(" "),a("ul",[a("li",[s._v("请求服务器，返回一段 HTML 文本，然后 innerHTML。")]),s._v(" "),a("li",[s._v("简单客户端模板，写一个页面不可见的模板，用变量的值去填充模板后，插入到页面中来。")]),s._v(" "),a("li",[s._v("复杂客户端模板，使用 Handlebars，创建模板，渲染数据。")])]),s._v(" "),a("h3",{attrs:{id:"避免创建全局变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#避免创建全局变量"}},[s._v("#")]),s._v(" 避免创建全局变量")]),s._v(" "),a("p",[s._v("我们都知道，在全局作用域下定义的变量和方法，都会挂载到 window 对象上，随着对象越挂越多，项目也就越来越难以维护了。创建全局变量还会导致以下几个问题：")]),s._v(" "),a("ul",[a("li",[s._v("命名冲突")]),s._v(" "),a("li",[s._v("代码脆弱性\n"),a("ul",[a("li",[s._v("如果大量函数都引用了全局变量，而一旦某个地方不小心改变了值，所有使用的地方就完了。")])])]),s._v(" "),a("li",[s._v("难以测试\n"),a("ul",[a("li",[s._v("开发环境，测试环境，线上环境，都需要引入一套不同的全局变量，不方便维护。")])])])]),s._v(" "),a("h4",{attrs:{id:"解决全局变量方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决全局变量方案"}},[s._v("#")]),s._v(" 解决全局变量方案")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("单全局变量")]),s._v(" "),a("ul",[a("li",[s._v("只使用一个对象定义在全局变量上，其他的对象都作为这个对象的属性和方法。")]),s._v(" "),a("li",[s._v("引用命名空间概念：\n"),a("ul",[a("li",[s._v("调用 namespace() 来声明开发者将要使用的命名空间，即：将对象挂载到哪个对象下，如果不存在，就创建一个对象。")])])])])]),s._v(" "),a("li",[a("strong",[s._v("AMD 模块化")]),s._v(" "),a("ul",[a("li",[s._v("定义一个 define 方法，将模块名，依赖，都传进去，在工厂方法里就能使用所依赖的模块了。")])])])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// AMD 模块定义")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("define")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'module-name'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dep1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dep2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("dep1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dep2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("使用 RequireJS 更好地引入模块。")])]),s._v(" "),a("p",[s._v("RequireJS 增加了另一个全局函数 require()，专门用来加载指定的依赖和执行回调函数。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'my-book'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("books")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("books"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[a("strong",[s._v("零全局变量")]),s._v(" "),a("ul",[a("li",[s._v("如果你的脚本非常短，并且不需要和其他代码产生交互，可以"),a("strong",[s._v("使用一个自执行函数来实现模块化")]),s._v("。")])])])]),s._v(" "),a("h3",{attrs:{id:"事件处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事件处理"}},[s._v("#")]),s._v(" 事件处理")]),s._v(" "),a("p",[s._v("在编写事件处理程序时，我们应该遵守一下几点：")]),s._v(" "),a("ul",[a("li",[s._v("隔离应用逻辑。将应用逻辑从所有的事件处理程序中抽离出来。")]),s._v(" "),a("li",[s._v("不要分发事件对象。只传递需要的数据，给应用逻辑就行了。")]),s._v(" "),a("li",[s._v("让事件处理程序成为接触到 Event 对象的唯一函数。其他需要用到的，就从事件处理程序中传递。")])]),s._v(" "),a("p",[s._v("实际应用场景是这样的：")]),s._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("button")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("onclick")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("doSomeThing()"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("click me"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}},[a("span",{pre:!0,attrs:{class:"token language-javascript"}},[s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 事件处理程序")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("doSomeThing")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("e")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" clientX "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("clientX"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 不要将e 传入应用逻辑中，只传递需要使用的字段")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("clientX"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 应用逻辑")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("text")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("h3",{attrs:{id:"类型检测"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#类型检测"}},[s._v("#")]),s._v(" 类型检测")]),s._v(" "),a("h4",{attrs:{id:"检测原始类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#检测原始类型"}},[s._v("#")]),s._v(" 检测原始类型")]),s._v(" "),a("p",[s._v("推荐使用 typeof 来检测原始类型的值。typeof 本身是一个表达式，所以推荐使用无括号的写法。")]),s._v(" "),a("h4",{attrs:{id:"检测自定义类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#检测自定义类"}},[s._v("#")]),s._v(" 检测自定义类")]),s._v(" "),a("p",[s._v("JS 检测自定义类时，最好的做法是使用 instanceof，这也是唯一的方法。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("Person")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" p "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Person")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("p "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("instanceof")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Person")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("instanceof 也可以检测引用对象的值。但可能会检测到原型对象上。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" now "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("now "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("instanceof")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// true")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("now "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("instanceof")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// true")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h4",{attrs:{id:"检测函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#检测函数"}},[s._v("#")]),s._v(" 检测函数")]),s._v(" "),a("p",[s._v("typeof 是检测 JS 检测函数的最佳选择。但 IE8 及其以前的浏览器对 DOM 上的方法实现方式有问题。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// IE 8 会存在问题")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("getElementById"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// object")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"检测数组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#检测数组"}},[s._v("#")]),s._v(" 检测数组")]),s._v(" "),a("p",[s._v("使用 Object.prototype.toString.call(value) === '[object Array]' 检测数组效果很不错，在 ES6 中可以通过 Array.isArray 来实现。")]),s._v(" "),a("h4",{attrs:{id:"检测属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#检测属性"}},[s._v("#")]),s._v(" 检测属性")]),s._v(" "),a("p",[s._v("检测属性使用以下两个操作符：")]),s._v(" "),a("ul",[a("li",[s._v("in 运算符（会检测原型链上的属性）")]),s._v(" "),a("li",[s._v("hasOwnProperty")])]),s._v(" "),a("h3",{attrs:{id:"将配置数据从代码中分离出来"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#将配置数据从代码中分离出来"}},[s._v("#")]),s._v(" 将配置数据从代码中分离出来")]),s._v(" "),a("p",[s._v("在实际的项目中可以遇到这种问题，本来只需要更改一些静态数据，但由于不小心改到了其他业务代码，导致部分业务代码报错。所以，把需要配置的静态数据抽离出来是非常利于维护的。一般按照以下几点将数据抽离出来：")]),s._v(" "),a("ul",[a("li",[s._v("URL")]),s._v(" "),a("li",[s._v("展示给用户的字符串")]),s._v(" "),a("li",[s._v("重复的值")]),s._v(" "),a("li",[s._v("设置信息")]),s._v(" "),a("li",[s._v("任何可能发生变更的值")])]),s._v(" "),a("p",[s._v("我们可以将抽离出来的配置数据放在以下几个地方：")]),s._v(" "),a("ul",[a("li",[s._v("抽离数据到一个 JSON 文件中。（通过请求去获取）")]),s._v(" "),a("li",[s._v("抽离封装到一个 JSONP 文件中。（通过 script 标签获取）")]),s._v(" "),a("li",[s._v("使用纯 javascript。（直接读取）")])]),s._v(" "),a("h3",{attrs:{id:"抛出自定义错误"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#抛出自定义错误"}},[s._v("#")]),s._v(" 抛出自定义错误")]),s._v(" "),a("p",[s._v("我们在开发项目时，遇到错误其实并不可怕，可怕的将这些错误带到线上环境中去。为此，在程序的一些关键地方，使用自定义错误，可以让我们在上线前提前发现问题，避免出错的影响变大。编写自定义错误可以遵守一下几点：")]),s._v(" "),a("ul",[a("li",[s._v("总是在错误信息中包含函数名称，以及函数失败的原因。")]),s._v(" "),a("li",[s._v("只在该抛出错误的地方抛出错误，不必要过度的进行错误预判，抛出错误。")]),s._v(" "),a("li",[s._v("如果使用 try catch ，catch 里不能为空，应该对错误做一些处理。")]),s._v(" "),a("li",[s._v("对于自定义错误，最好是继承 Error 错误类型，浏览器会给 Error 对象附加一些额外的信息。")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("MyError")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("message")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyError")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"不是你的对象不要动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不是你的对象不要动"}},[s._v("#")]),s._v(" 不是你的对象不要动")]),s._v(" "),a("p",[s._v("在我们编写代码的时候，会用到很多其他对象，一些是存在于上下文作用域中、一些是存在于其他库里等等，这些对象都不是我们自己定义的。对于这些对象，我们要做到完全不去改动。其他对象主要包括：")]),s._v(" "),a("ul",[a("li",[s._v("JS 原生对象")]),s._v(" "),a("li",[s._v("DOM 对象")]),s._v(" "),a("li",[s._v("浏览器对象模型，BOM 对象")]),s._v(" "),a("li",[s._v("类库的对象")])]),s._v(" "),a("p",[s._v("即使是目前项目中的对象，只要不是你写的，也不应该随便修改。")]),s._v(" "),a("ul",[a("li",[s._v("不要覆盖方法")]),s._v(" "),a("li",[s._v("不新增方法\n"),a("ul",[a("li",[s._v("例如：Prototype 库，是在源生 JS 上扩展一些方法，但扩展的方法可能以后被新的规范所使用，Prototype 库不得不立即修改以支持新的规范。")])])]),s._v(" "),a("li",[s._v("不删除方法")])]),s._v(" "),a("p",[s._v("如果是必须要修改其他对象，可以通过继承的方式来克隆一个之前的对象，然后再进行扩展。")]),s._v(" "),a("ul",[a("li",[s._v("基于对象的继承（常规的继承）")]),s._v(" "),a("li",[s._v("基于类型的继承（如继承 Error 类型）")])]),s._v(" "),a("h4",{attrs:{id:"关于-polyfill"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于-polyfill"}},[s._v("#")]),s._v(" 关于 Polyfill")]),s._v(" "),a("p",[s._v("Polyfills 的优点是：如果浏览器提供原生实现，可以非常轻松的移除他们。如果浏览器没有实现，就使用现有的方法，巧妙地实现，实现过程可能会不精确。")]),s._v(" "),a("h4",{attrs:{id:"为了防止对象修改"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为了防止对象修改"}},[s._v("#")]),s._v(" 为了防止对象修改")]),s._v(" "),a("ul",[a("li",[s._v("防止扩展 Object.preventExtensions() 不可扩展")]),s._v(" "),a("li",[s._v("密封对象 Object.seal() 不能删除已存在属性，不可扩展")]),s._v(" "),a("li",[s._v("冻结对象 Object.freeze() 不能修改已存在的属性，不能删除已存在属性，不可扩展")])]),s._v(" "),a("h3",{attrs:{id:"浏览器嗅探"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#浏览器嗅探"}},[s._v("#")]),s._v(" 浏览器嗅探")]),s._v(" "),a("p",[s._v("1、user-agent 方式（可以被篡改）。")]),s._v(" "),a("p",[s._v("2、使用特性检测。为特定浏览器的特性进行测试，并仅当特性存在时即可应用特性检测。例如：")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 早期浏览器不支持 getElementById")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("getElementById"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" dom "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xx'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("all"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" dom "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xx'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("特性检测的流程：")]),s._v(" "),a("ul",[a("li",[s._v("探测标准的方法。")]),s._v(" "),a("li",[s._v("探测不同浏览器的特定方法。")]),s._v(" "),a("li",[s._v("都不存在时，提供一个合乎逻辑的备用方法。")])]),s._v(" "),a("h4",{attrs:{id:"避免特性推断"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#避免特性推断"}},[s._v("#")]),s._v(" 避免特性推断")]),s._v(" "),a("p",[s._v("推断是假设并非事实。例如：这里根据 getElementsByTagName 去推断 getElementById，显然是不合理的。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("getElementsByTagName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" dom "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xx'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h4",{attrs:{id:"避免浏览器推断"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#避免浏览器推断"}},[s._v("#")]),s._v(" 避免浏览器推断")]),s._v(" "),a("p",[s._v("通过 document.all 判断就是 IE 浏览器了，这是“自作聪明”的，因为其他浏览器也可能存在 document.all。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("all"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'This is IE'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"自动化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自动化"}},[s._v("#")]),s._v(" 自动化")]),s._v(" "),a("p",[s._v("以下列举了书中介绍的自动化配置过程，很实用，现在的项目都可以使用这些思想来配置持续集成。可惜的是，现在看来书中的信息比较滞后（因为写的早），很多介绍的库已经过时了，这里就不详细介绍了。")]),s._v(" "),a("ul",[a("li",[s._v("ant 构建工具")]),s._v(" "),a("li",[s._v("校验语法错误")]),s._v(" "),a("li",[s._v("文件合并和加工")]),s._v(" "),a("li",[s._v("文件精简和压缩")]),s._v(" "),a("li",[s._v("文档化")]),s._v(" "),a("li",[s._v("自动化测试\n"),a("ul",[a("li",[s._v("PhantomJS")])])]),s._v(" "),a("li",[s._v("组装到一起\n"),a("ul",[a("li",[s._v("jekins")])])])]),s._v(" "),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),a("p",[s._v("这本书看着很快，三天时间就看完了，但书中的编码规范，编程实践部分还是学到了不少东西。现在写代码会常常冒出几个问题：注释该怎么写？类型判断要怎么才最好？数据代码是否抽离？")])])}),[],!1,null,null,null);t.default=e.exports}}]);